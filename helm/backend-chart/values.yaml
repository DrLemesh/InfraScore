# kubernetes/backend-chart/values.yaml

image:
  repository: drlemesh/infrascore-backend 
  pullPolicy: Always
  tag: "latest"

service:
  type: ClusterIP
  port: 80 # port inside the cluster

# env variables for connecting to the DB
env:
  FLASK_ENV: "production"
  DB_HOST: "infrascore-db" # Connects to the manual database chart service
  DB_PORT: "5432"
  DB_NAME: "quiz_project"
  DB_USER: "admin"
  # DB_PASSWORD and SECRET_KEY are now provided via secrets.yaml (or --set)
  # DB_PASSWORD: "" 
  # SECRET_KEY: ""

secrets:
  db_password: "CHANGEME" # Overridden by --set secrets.db_password
  secret_key: "CHANGEME"   # Overridden by --set secrets.secret_key
  gemini_api_key: ""

# postgresql settings
postgresql:
  enabled: true
  auth:
    username: "admin"
    password: "pqg3wjaLDIrrTVsC5KQ28W__YUghyNgt"
    postgresPassword: "pqg3wjaLDIrrTVsC5KQ28W__YUghyNgt"
    database: "quiz_project"
  primary:
postgresql:
  enabled: true
  auth:
    username: "admin"
    # password is now set via secrets
    database: "quiz_project"
  primary:
    persistence:
      enabled: true
      storageClass: "" # database-chart default, can be overridden
      
# Volume Mounts for Development
# Volume Mounts for Development (DISABLED for EKS)
volumes: []
#   - name: backend-code
#     hostPath:
#       path: /Users/lemesh/Documents/InfraScore/backend
#       type: Directory
#   - name: frontend-code
#     hostPath:
#       path: /Users/lemesh/Documents/InfraScore/frontend
#       type: Directory

volumeMounts: []
#   - name: backend-code
#     mountPath: /app/backend
#   - name: frontend-code
#     mountPath: /app/frontend

# Database configuration for backup CronJob
database:
  serviceAccountName: "infrascore-db-sa"
  backupBucket: "infrascore-db-backup-prod"
  host: "infrascore-db"
  name: "quiz_project"
  user: "admin"